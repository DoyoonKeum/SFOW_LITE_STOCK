<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="semi">

<resultMap type="semiDTO" id="semiDTO">
        <result property="companyCode" column="company_code"/>
        <result property="itemCode" column="item_code"/>
        <result property="itemName" column="item_name"/>
        <result property="itemNo" column="item_no"/>
        <result property="itemType" column="item_type"/>
        <result property="itemSpecification" column="item_specification"/>
        <result property="itemStockUnit" column="item_stock_unit"/>
        <result property="lotSize" column="lotsize"/>
        <result property="buyPrice" column="buy_price"/>
        <result property="salesPrice" column="sales_price"/>
        <result property="memo" column="memo"/>
        <result property="useyn" column="useyn"/>
        <result property="createdate" column="createdate"/>
        <result property="updatedate" column="updatedate"/>
    </resultMap> 
    

	<select id="semiList" resultType="semiDTO">
		<![CDATA[
		select company_code as companyCode, item_code as itemCode,item_name as itemName,item_no as itemNo,item_type as itemType,item_specification as itemSpecification,item_stock_unit as itemStockUnit,buy_price as buyPrice,sales_price as salesPrice,lotsize,memo,useyn,createdate,updatedate
			from ma_item
			where useyn='Y'
						
		order by item_code 
		]]>	
	</select>

	<select id="semiListSearch" resultMap="semiDTO" parameterType="semiDTO">
		<![CDATA[
		select company_code as companyCode, item_code as itemCode,item_name as itemName,item_no as itemNo,item_type as itemType,item_specification as itemSpecification,item_stock_unit as itemStockUnit,buy_price as buyPrice,sales_price as salesPrice,lotsize,memo,useyn,createdate,updatedate
			from ma_item
			where useyn='Y'
						 AND COALESCE(item_code, '') LIKE CONCAT('%', #{itemCode}, '%')
						 AND COALESCE(item_name, '') LIKE CONCAT('%', #{itemName}, '%')
						 AND COALESCE(item_no, '') LIKE CONCAT('%', #{itemNo}, '%') 
		order by item_code 
		]]>	
	</select>

	<insert id="insertSemi" parameterType="semiDTO">

		INSERT INTO ma_item (item_name, item_no, item_type, item_specification, item_stock_unit, buy_price,sales_price,lotsize, memo,useyn,createdate) 
		values (#{itemName}, #{itemNo}, #{itemType}, #{itemSpecification}, #{itemStockUnit}, #{lotSize},#{buyPrice},#{salesPrice}, #{memo}, #{useyn},now())
	</insert>
	
	
	<update id="updateSemi" parameterType="semiDTO">
		update ma_item
		set item_name=#{itemName}, item_no=#{itemNo}, item_type=#{itemType} ,item_specification=#{itemSpecification},item_stock_unit=#{itemStockUnit},buy_price=#{buyPrice}, sales_price=#{salesPrice}, lotsize=#{lotSize}, memo=#{memo},useyn=#{useyn} ,updatedate=now()
		where item_code=#{itemCode}
	</update>

	<update id="useUpdate" parameterType="String">
		<![CDATA[
			update ma_item
			set useyn='N'
			where item_code=#{itemCode}
		]]>
	</update>
	


</mapper>  